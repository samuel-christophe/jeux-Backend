//constructeur de position
var cP = (function() {
  // déclaration de fonction constructeur
  var ConstructOfPosition = function(left, top, width, height, src) {
    this.left = left;
    this.top = top;
    this.width = width;
    this.height = height;
    this.src = src;
  };

  return function(l, t, w, h, s) {
    // création d'un nouvel objet avec la fonction constructeur
    return new ConstructOfPosition(l, t, w, h, s);
  }
})();

var nbCarte = {
  '12': 4,
  '13': 5,
  '14': 5,
  '15': 6,
  '16': 6,
  '17': 7,
  '22': 5,
  '23': 6,
  '24': 6,
  '25': 7,
  '26': 8,
  '27': 8,
  '32': 6,
  '33': 7,
  '34': 7,
  '35': 8,
  '36': 9,
  '37': 9
};

var cartesPersonnages = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24];
var cartesLieux = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24];
var cartesObjet = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23];

//nombre aléatoir
var getRandom = (nombre) => {
  return Math.floor(Math.random() * nombre);
};

//renvoi un tableau de carte
exports.get = (level, nbPlayer) => {
  var nbCartes = nbCarte[level + '' + nbPlayer];
  var listesCartes = {};
  //tirage des cartes
  var tirage = (tab) => {
    var temp, carteTrie, nb;
    var tabVoyant = [];
    var tabTirage = [];
    var tabFantom = [];
    for (carteTrie = 0; carteTrie < nbCartes; carteTrie++) {
      nb = getRandom(tab.length - (1 + carteTrie));
      temp = tab[tab.length - (1 + carteTrie)];
      tabVoyant[carteTrie] = tab[nb];
      tabTirage[carteTrie] = tab[nb];
      tab[tab.length - (1 + carteTrie)] = tab[nb];
      tab[nb] = temp;
    }
    for (carteTrie = 0; carteTrie < (nbPlayer - 1); carteTrie++) {
      nb = getRandom(tabTirage.length - (1 + carteTrie));
      temp = tabTirage[tabTirage.length - (1 + carteTrie)];
      tabFantom[carteTrie] = tabTirage[nb];
      tabTirage[tabTirage.length - (1 + carteTrie)] = tabTirage[nb];
      tabTirage[nb] = temp;
    }
    return {tabVoyant : tabVoyant, tabFantom : tabFantom};
  };
  listesCartes.cartesPersonnages = tirage(cartesPersonnages);
  listesCartes.cartesLieux = tirage(cartesLieux);
  listesCartes.cartesObjet = tirage(cartesObjet);
  return listesCartes;
};

//renvoi un tableau trié aléatoirement
exports.vision = (tab) => {
  var temp, carteTrie, nb;
  for (carteTrie = 0; carteTrie < tab.length; carteTrie++) {
    nb = getRandom(tab.length - (1 + carteTrie));
    temp = tab[tab.length - (1 + carteTrie)];
    tab[tab.length - (1 + carteTrie)] = tab[nb];
    tab[nb] = temp;
  }
  return tab;
};
